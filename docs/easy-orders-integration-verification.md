# ุฏููู ุงูุชุญูู ูู ุชูุงูู Easy Orders

ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ุงูุชุญูู ูู ุฃู ุฌููุน ูุธุงุฆู ุงูุชูุงูู ูุน Easy Orders ุชุนูู ุจุดูู ุตุญูุญ ูููุงู ูููุซุงุฆู.

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงููุงููุฉ

### 1. โ Authorized App Link
**ุงูุชุญูู:**
- [x] ูุชู ุฅูุดุงุก ุงูุฑุงุจุท ุจุดูู ุตุญูุญ ูุน ุฌููุน ุงููุนุงููุงุช ุงููุทููุจุฉ
- [x] `app_name`: ููุตุฉ ุฑุจุญ - Ribh Platform
- [x] `app_description`: ููุตุฉ ุฑุจุญ ููุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ - ุฑุจุท ูุชุฌุฑู ูุน EasyOrders
- [x] `app_icon`: ุฑุงุจุท ุงูุฃููููุฉ
- [x] `callback_url`: ุฑุงุจุท callback ุตุญูุญ
- [x] `orders_webhook`: ุฑุงุจุท webhook ููุทูุจุงุช
- [x] `order_status_webhook`: ุฑุงุจุท webhook ูุชุญุฏูุซุงุช ุญุงูุฉ ุงูุทูุจ (ุงุฎุชูุงุฑู)
- [x] `permissions`: ุฌููุน ุงูุตูุงุญูุงุช ุงููุทููุจุฉ (products:read, products:create, products:update, orders:read, shipping_areas)
- [x] `redirect_url`: ุฑุงุจุท ุฅุนุงุฏุฉ ุงูุชูุฌูู ุจุนุฏ ุงูุชุซุจูุช

**ุงูููู:** `app/api/integrations/easy-orders/authorized-link/route.ts`

---

### 2. โ Callback Handling
**ุงูุชุญูู:**
- [x] POST endpoint ูุณุชูุจู `api_key` ู `store_id` ูู EasyOrders
- [x] GET endpoint ูุนุงูุฌ ุฅุนุงุฏุฉ ุงูุชูุฌูู ุจุนุฏ ุงูุชุซุจูุช
- [x] ุญูุธ API Key ู Store ID ูู ุงูุชูุงูู
- [x] ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุงูู ุฅูู "ูุดุท"
- [x] ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงููุฎุชููุฉ (ูุน userIdุ ุจุฏูู userId)

**ุงูููู:** `app/api/integrations/easy-orders/callback/route.ts`

---

### 3. โ Webhook Secret Handling
**ุงูุชุญูู:**
- [x] Webhook endpoint ูุณุชูุจู `secret` header
- [x] ุญูุธ Webhook Secret ุชููุงุฆูุงู ุนูุฏ ุงุณุชูุจุงู ุฃูู webhook
- [x] ุงูุชุญูู ูู Webhook Secret ูุจู ูุนุงูุฌุฉ ุงูุทูุจุงุช
- [x] ูุทุงุจูุฉ Store ID ูุน ุงูุชูุงูู

**ุงูููู:** `app/api/integrations/easy-orders/webhook/route.ts`

---

### 4. โ Automatic Integration Only
**ุงูุชุญูู:**
- [x] ุงูุฑุจุท ุงูุชููุงุฆู ูุนูู ุจุดูู ุตุญูุญ
- [x] ุญูุธ API Key ู Store ID ุชููุงุฆูุงู
- [x] ุญูุธ Webhook Secret ุชููุงุฆูุงู (ุฅุฐุง ูุงู ูุชุงุญุงู)
- [x] ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุงูู ุจูุงุกู ุนูู ูุชูุฌุฉ ุงูุงุฎุชุจุงุฑ

**ุงูููู:** `app/api/integrations/route.ts`

---

### 5. โ Connection Testing
**ุงูุชุญูู:**
- [x] ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุงููุนูู ูุน Easy Orders API
- [x] ุงุณุชุฎุฏุงู endpoint ุฎููู (GET /categories) ููุงุฎุชุจุงุฑ
- [x] ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (401, 403, etc.)
- [x] ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุงูู ุจูุงุกู ุนูู ุงููุชูุฌุฉ

**ุงูููู:** `models/StoreIntegration.ts` - method `testConnection`

---

### 6. โ Shipping Sync
**ุงูุชุญูู:**
- [x] ุงุณุชุฎุฏุงู PATCH /api/v1/external-apps/shipping
- [x] ุชูุณูู ุงูุจูุงูุงุช: `city:cost,city:cost`
- [x] ุงุณุชุฎุฏุงู Api-Key header
- [x] ุชุญุฏูุซ `shippingSynced` ู `lastShippingSync`
- [x] ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

**ุงูููู:** `app/api/integrations/easy-orders/sync-shipping/route.ts`

---

### 7. โ Product Export
**ุงูุชุญูู:**
- [x] ุงุณุชุฎุฏุงู POST /api/v1/external-apps/products ูุฅูุดุงุก ููุชุฌ ุฌุฏูุฏ
- [x] ุงุณุชุฎุฏุงู PATCH /api/v1/external-apps/products/:product_id ูุชุญุฏูุซ ููุชุฌ ููุฌูุฏ
- [x] ุงุณุชุฎุฏุงู Api-Key header
- [x] ุชุญููู ุงูููุชุฌ ุฅูู ุชูุณูู Easy Orders
- [x] ุญูุธ `easyOrdersProductId` ูู metadata ุงูููุชุฌ
- [x] ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

**ุงููููุงุช:**
- `app/api/integrations/easy-orders/export-product/route.ts`
- `lib/integrations/easy-orders/product-converter.ts`

---

### 8. โ Bulk Export
**ุงูุชุญูู:**
- [x] ุชุตุฏูุฑ ุนุฏุฉ ููุชุฌุงุช ุฏูุนุฉ ูุงุญุฏุฉ
- [x] ุงุญุชุฑุงู Rate Limit (1.5 ุซุงููุฉ ุจูู ูู ุทูุจ)
- [x] ุฅุฑุฌุงุน ูุงุฆูุฉ ุจุงูููุชุฌุงุช ุงููุงุฌุญุฉ ูุงููุงุดูุฉ
- [x] ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ููู ููุชุฌ

**ุงูููู:** `app/api/integrations/easy-orders/export-bulk/route.ts`

---

### 9. โ Webhook Handling
**ุงูุชุญูู:**
- [x] ุงุณุชูุจุงู Order Created events
- [x] ุงุณุชูุจุงู Order Status Update events
- [x] ุงูุชุญูู ูู Webhook Secret
- [x] ุฅูุดุงุก ุทูุจ ูู ูุธุงู ุฑุจุญ
- [x] ุชุญููู ุญุงูุงุช ุงูุทูุจ ูู Easy Orders ุฅูู ูุธุงู ุฑุจุญ
- [x] ูุนุงูุฌุฉ ุงูููุชุฌุงุช ูุงููุชุบูุฑุงุช

**ุงูููู:** `app/api/integrations/easy-orders/webhook/route.ts`

---

### 10. โ Rate Limit Handling
**ุงูุชุญูู:**
- [x] ูุนุงูุฌุฉ 429 Too Many Requests
- [x] Retry ูุน exponential backoff
- [x] ุงุญุชุฑุงู Retry-After header
- [x] ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู

**ุงูููู:** `lib/integrations/easy-orders/product-converter.ts` - function `sendProductToEasyOrders`

---

### 11. โ Authentication
**ุงูุชุญูู:**
- [x] ุงุณุชุฎุฏุงู `Api-Key` header ูู ุฌููุน ุงูุทูุจุงุช
- [x] ุนุฏู ุงุณุชุฎุฏุงู `Authorization: Bearer`
- [x] ุฅุฑุณุงู API Key ุจุดูู ุตุญูุญ

**ุงููููุงุช:**
- `lib/integrations/easy-orders/product-converter.ts`
- `app/api/integrations/easy-orders/sync-shipping/route.ts`

---

### 12. โ Error Handling
**ุงูุชุญูู:**
- [x] 401 Unauthorized - API Key ุบูุฑ ุตุงูุญ
- [x] 403 Forbidden - ุนุฏู ูุฌูุฏ ุตูุงุญูุงุช
- [x] 404 Not Found - ุงูููุชุฌ ุบูุฑ ููุฌูุฏ
- [x] 429 Too Many Requests - Rate Limit
- [x] 400 Bad Request - ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ
- [x] ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

**ุงููููุงุช:**
- `lib/integrations/easy-orders/product-converter.ts`
- ุฌููุน API routes

---

### 13. โ Permissions
**ุงูุชุญูู:**
- [x] ุงูุตูุงุญูุงุช ุงููุทููุจุฉ ูู Authorized App Link:
  - `products:read`
  - `products:create`
  - `products:update`
  - `orders:read`
  - `shipping_areas`
- [x] ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุนูุฏ ุงูุงุฎุชุจุงุฑ (403 error)

**ุงูููู:** `app/api/integrations/easy-orders/authorized-link/route.ts`

---

### 14. โ UI Improvements
**ุงูุชุญูู:**
- [x] ุฅุฒุงูุฉ YouCan ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู
- [x] ุฅุถุงูุฉ ุฒุฑ ุณุฑูุน ูููุตูู ุฅูู ุตูุญุฉ ุงูุชูุงููุงุช
- [x] ุฅุถุงูุฉ ุฅุฑุดุงุฏุงุช ูุงุถุญุฉ ูู ุตูุญุฉ ุงูุชูุงููุงุช
- [x] ุฅุถุงูุฉ ุฒุฑ ุชุตุฏูุฑ ูู ุตูุญุฉ ุงูููุชุฌุงุช

**ุงููููุงุช:**
- `app/dashboard/integrations/page.tsx`
- `app/dashboard/page.tsx`
- `app/dashboard/products/page.tsx`
- `components/dashboard/DashboardSidebar.tsx`

---

## ๐งช ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุงูุฑุจุท ุงูุชููุงุฆู
1. ุงูุชูู ุฅูู `/dashboard/integrations`
2. ุงุถุบุท "ุฅุถุงูุฉ ุชูุงูู"
3. ุงุถุบุท "ุฑุจุท ุชููุงุฆู ูุน EasyOrders"
4. ูู ุจุงูููุงููุฉ ูู EasyOrders
5. **ุงูุชุญูู:**
   - โ ุธููุฑ ุชูุงูู ุฌุฏูุฏ ุจุญุงูุฉ "ูุดุท"
   - โ ุนุฑุถ Store ID
   - โ ุญูุธ API Key ุชููุงุฆูุงู

### ุงุฎุชุจุงุฑ 2: ูุฒุงููุฉ ุงูุดุญู
1. ุชุฃูุฏ ูู ูุฌูุฏ ููุงุทู ุดุญู ูู ุงููุธุงู
2. ุงุถุบุท "ูุฒุงููุฉ ุงูุดุญู" ููุชูุงูู
3. **ุงูุชุญูู:**
   - โ ุฑุณุงูุฉ ูุฌุงุญ
   - โ ุชุญุฏูุซ `lastShippingSync`
   - โ ุธููุฑ ุงููุฏู ูู EasyOrders Dashboard

### ุงุฎุชุจุงุฑ 3: ุชุตุฏูุฑ ููุชุฌ
1. ุงูุชูู ุฅูู `/dashboard/products`
2. ุงุถุบุท "ุชุตุฏูุฑ" ุนูู ููุชุฌ ูุนุชูุฏ
3. **ุงูุชุญูู:**
   - โ ุฑุณุงูุฉ ูุฌุงุญ
   - โ ุธููุฑ ุงูููุชุฌ ูู EasyOrders
   - โ ุญูุธ `easyOrdersProductId`

### ุงุฎุชุจุงุฑ 4: ุงุณุชูุจุงู Webhook
1. ุฃูุดุฆ ุทูุจ ุชุฌุฑูุจู ูู EasyOrders
2. **ุงูุชุญูู:**
   - โ ุธููุฑ ุทูุจ ุฌุฏูุฏ ูู `/dashboard/orders`
   - โ Badge "EasyOrders" ุนูู ุงูุทูุจ
   - โ ุฌููุน ุจูุงูุงุช ุงูุทูุจ ุตุญูุญุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

### Webhook Secret
- ุนูุฏ ุงุณุชุฎุฏุงู ุงูุฑุจุท ุงูุชููุงุฆูุ ูุชู ุฅูุดุงุก Webhook ุชููุงุฆูุงู
- Webhook Secret ูุชู ุญูุธู ุชููุงุฆูุงู ุนูุฏ ุงุณุชูุจุงู ุฃูู webhook
- ุฅุฐุง ูู ูุชู ุญูุธ Webhook Secretุ ูููู ุฅุถุงูุชู ูู ุฅุนุฏุงุฏุงุช ุงูุชูุงูู ุนูุฏ ุงูุชุนุฏูู

### Rate Limit
- ุงูุญุฏ ุงูุฃูุตู: 40 ุทูุจ/ุฏูููุฉ
- ูุชู ุงุญุชุฑุงู Rate Limit ูู Bulk Export (1.5 ุซุงููุฉ ุจูู ูู ุทูุจ)
- ูุชู Retry ุชููุงุฆูุงู ุนูุฏ 429 error

### Permissions
- ุชุฃูุฏ ูู ุฃู API Key ูุฏูู ุฌููุน ุงูุตูุงุญูุงุช ุงููุทููุจุฉ
- ุนูุฏ ุงุณุชุฎุฏุงู Authorized App Linkุ ูุชู ููุญ ุงูุตูุงุญูุงุช ุชููุงุฆูุงู

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุดู ุงูุฑุจุท ุงูุชููุงุฆู
**ุงูุชุญูู:**
- [ ] Base URL ุตุญูุญ ูู `.env`
- [ ] Callback URL ูููู ุงููุตูู ุฅููู ูู ุงูุฅูุชุฑูุช
- [ ] ุงูุตูุงุญูุงุช ุงููุทููุจุฉ ููุฌูุฏุฉ

### ุงููุดููุฉ: ูุดู ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
**ุงูุชุญูู:**
- [ ] API Key ุตุญูุญ
- [ ] API Key ูุฏูู ุงูุตูุงุญูุงุช ุงููุทููุจุฉ
- [ ] ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช ูุนูู

### ุงููุดููุฉ: ูุดู ุชุตุฏูุฑ ุงูููุชุฌ
**ุงูุชุญูู:**
- [ ] ุงูููุชุฌ ูุนุชูุฏ ููุดุท
- [ ] API Key ูุฏูู ุตูุงุญูุฉ `products:create`
- [ ] ุงูุจูุงูุงุช ุงููุทููุจุฉ ููุฌูุฏุฉ (ุงุณูุ ุณุนุฑุ slug)

### ุงููุดููุฉ: ูุดู ุงุณุชูุจุงู Webhook
**ุงูุชุญูู:**
- [ ] Webhook URL ุตุญูุญ
- [ ] Webhook Secret ูุญููุธ ูู ุงูุชูุงูู
- [ ] Webhook URL ูููู ุงููุตูู ุฅููู ูู ุงูุฅูุชุฑูุช

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2024


