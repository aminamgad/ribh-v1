# قائمة مهام UI/UX لمكونات شحن الطلب وتحديثه

ضبط وتحسين تجربة المستخدم لمكونات الشحن في جميع أجزاء الموقع، مع تركيز خاص على وضوح ظهور القوائم المنسدلة.

---

## 1. القوائم المنسدلة — وضوح وظهور

### 1.1 توحيد تنسيق القوائم المنسدلة للقرية/المدينة
- [x] **app/dashboard/orders/[id]/page.tsx** — modal تحديث الشحن
  - تم: z-[60], border-2, rounded-xl, shadow-xl, ring-2 ring-[#FF9800]/20

- [x] **components/orders/BulkOrdersActions.tsx** — modal تحديث الشحن الجماعي (موضعان)
  - تم: نفس التوحيد مع صفحة تفاصيل الطلب

- [x] **components/ui/GovernorateVillageSelect.tsx** — اختيار المحافظة والقرية (موضعان)
  - تم: توحيد التنسيق مع باقي القوائم

- [x] **components/ui/VillageSelect.tsx** — إن وُجد قائمة منسدلة
  - تم: مراجعة وتوحيد نفس المعايير

### 1.2 تحسين عناصر القائمة المنسدلة
- [x] **ارتفاع وعرض العناصر**
  - تم: min-h-[44px], py-3 لعناصر القائمة

- [x] **التمييز البصري**
  - تم: bg-[#FF9800], hover:bg-[#F57C00], transition-colors

- [x] **التمرير (scroll)**
  - تم: overflow-y-auto مع max-h-60

### 1.3 القوائم المنسدلة داخل الـ modal
- [x] **تأكد من z-index**
  - تم: القائمة المنسدلة z-[60]

- [x] **منع القص (overflow)**
  - تم: استخدام `createPortal` لعرض القوائم خارج الـ modal (position: fixed) في:
    - `app/dashboard/orders/[id]/page.tsx`
    - `components/orders/BulkOrdersActions.tsx`

---

## 2. حقول الإدخال — المدينة/القرية

### 2.1 زر المسح (X)
- [x] استخدام `onMouseDown` بدلاً من `onClick` (تم في عدة أماكن)
- [x] إضافة `userClearedVillageRef` لمنع إعادة الظهور عند التركيز (تم)
- [ ] التحقق من ظهور زر X بشكل واضح (لون، حجم، مساحة نقرة)
  - المواقع: order detail page, BulkOrdersActions

### 2.2 الـ placeholder والتسميات
- [x] توحيد نص الـ placeholder: `"ابحث عن القرية أو المحافظة أو ID..."`
- [ ] التحقق من وضوح التسمية "المدينة *" أو "القرية *" حسب السياق

### 2.3 أيقونة البحث
- [x] التأكد من عدم تداخل أيقونة البحث مع النص
  - تم: pl-10/pr-10 لمساحة كافية

---

## 3. نماذج تحديث الشحن (Modals)

### 3.1 modal تفاصيل الطلب — تحديث الشحن
- **الموقع:** `app/dashboard/orders/[id]/page.tsx`
- [ ] ترتيب الحقول: شركة الشحن → المدينة/القرية
- [ ] توحيد ارتفاع الأزرار والأحجام (min-h-44px)
- [ ] وضوح أزرار "تحديث" و"إلغاء" و"شحن إلى شركة الشحن"

### 3.2 modal تحديث الشحن الجماعي
- **الموقع:** `components/orders/BulkOrdersActions.tsx`
- [ ] تحسين التمرير عند وجود عدة طلبات (max-h-400px)
- [ ] توحيد تنسيق حقول القرية لكل طلب
- [ ] رسالة توضيحية واضحة: "يرجى تحديد المدينة لكل طلب أدناه"

### 3.3 صفحة السلة — عنوان الشحن
- **الموقع:** `app/dashboard/cart/page.tsx`
- [ ] GovernorateVillageSelect — مراجعة وضوح القوائم المنسدلة
- [ ] توحيد التنسيق مع باقي مكونات الشحن

---

## 4. توحيد التصميم

### 4.1 ألوان العلامة التجارية
- [x] استخدام `#FF9800` و`#F57C00` للتركيز والتحديد (focus/selected)
- [x] التأكد من `focus:ring-[#FF9800]` على حقول القرية/المدينة

### 4.2 الوضع الداكن (Dark mode)
- [x] مراجعة ألوان القوائم: `dark:bg-slate-800`, `dark:border-slate-600`
- [x] التأكد من وضوح النص والحدود في الوضع الداكن

### 4.3 الاستجابة (Responsive)
- [x] على الموبايل: min-h-[44px] لمناطق اللمس
- [ ] التحقق من عرض القوائم بشكل صحيح على الشاشات الصغيرة

---

## 5. تجربة المستخدم (UX)

### 5.1 التغذية الراجعة
- [ ] عرض رسالة نجاح عند اختيار القرية (موجود: toast)
- [ ] إظهار "عرض X من Y قرية" بوضوح أسفل الحقل
- [ ] رسائل الخطأ عند الحقول المطلوبة الفارغة

### 5.2 إمكانية الوصول (Accessibility)
- [ ] `aria-label` على حقول البحث وزر المسح
- [ ] التنقل بالكيبورد (↑↓ Enter Esc) — التحقق من وجوده وعمله
- [ ] `role="listbox"` و`role="option"` للقوائم المنسدلة

### 5.3 تحميل البيانات
- [ ] حالة التحميل عند جلب القرى: spinner واضح
- [ ] رسالة "لا توجد نتائج" عند عدم وجود قرى مطابقة

---

## 6. الملفات المتأثرة

| الملف | الوصف |
|-------|-------|
| `app/dashboard/orders/[id]/page.tsx` | modal تحديث الشحن — حقل القرية وقائمتها |
| `components/orders/BulkOrdersActions.tsx` | modal تحديث الشحن الجماعي — حقول القرية |
| `components/ui/GovernorateVillageSelect.tsx` | اختيار المحافظة والقرية (السلة وغيره) |
| `components/ui/VillageSelect.tsx` | اختيار القرية (إن وُجد) |
| `app/dashboard/cart/page.tsx` | صفحة السلة — عنوان الشحن |
| `components/search/SearchFilters.tsx` | قائمة "المنتجات المعدلة يدوياً" (إن تعلق بالشحن) |

---

## 7. أولويات التنفيذ

1. **أولوية عالية:** وضوح القوائم المنسدلة (z-index، حدود، ظل)
2. **أولوية عالية:** منع قص القوائم داخل الـ modal
3. **أولوية متوسطة:** توحيد التنسيق والارتفاعات
4. **أولوية متوسطة:** تحسين تجربة الموبايل
5. **أولوية منخفضة:** تحسينات إضافية للوصولية والـ dark mode
