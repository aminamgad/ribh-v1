# ๐ ุชุญููู API Documentation: Create Package

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง API endpoint ูุฎุตุต ููุดุฑูุงุช ุงูุฎุงุฑุฌูุฉ ูุฅูุดุงุก ุทูุจุงุช ุดุญู (packages) ูู ุงููุธุงู. ุงููุธุงู ุงูุญุงูู ูุง ูุญุชูู ุนูู ูุฐุง ุงูู endpointุ ููุญุชุงุฌ ุฅูู ุฅูุดุงุฆู.

---

## ๐ ุงูุชุญููู ุงูุชูุตููู

### 1๏ธโฃ **Endpoint ุงูุฃุณุงุณู**

```
POST /api/external_company/create-package
```

**ุงููุตู:**
- ูููู ุจุฅูุดุงุก ุทูุจ ุดุญู ุฌุฏูุฏ (package) ูู ุงููุธุงู
- ูุตูู ููุงุณุชุฎุฏุงู ูู ูุจู ุดุฑูุงุช ุฎุงุฑุฌูุฉ (ูุซู ุดุฑูุงุช ุงูุดุญู ุฃู ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ)
- ูุชุทูุจ ูุตุงุฏูุฉ (Authentication) ุจุงุณุชุฎุฏุงู Bearer Token

---

### 2๏ธโฃ **Request Headers (ุฑุคูุณ ุงูุทูุจ)**

#### **Authorization**
- **ุงูููุน:** `string`
- **ูุทููุจ:** โ ูุนู
- **ุงููุตู:** Bearer token ูููุตุงุฏูุฉ
- **ุงูุตูุบุฉ:** `Bearer <your-token>`
- **ูุซุงู:** `Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`

#### **Content-Type**
- **ุงูููุน:** `string`
- **ูุทููุจ:** โ ูุนู
- **ุงููููุฉ:** ูุฌุจ ุฃู ุชููู `application/json`
- **ูุซุงู:** `Content-Type: application/json`

---

### 3๏ธโฃ **Request Body (ุฌุณู ุงูุทูุจ)**

#### ุงูุญููู ุงููุทููุจุฉ (Required Fields):

| ุงูุญูู | ุงูููุน | ูุทููุจ | ุงููุตู |
|------|------|-------|-------|
| `to_name` | string | โ | ุงุณู ุงููุณุชูู |
| `to_phone` | string | โ | ุฑูู ุงููุงุชู ุงูุฃุณุงุณู ูููุณุชูู |
| `alter_phone` | string | โ | ุฑูู ุงููุงุชู ุงูุจุฏูู ูููุณุชูู |
| `description` | string | โ | ูุตู ุงูุทุฑุฏ |
| `package_type` | string | โ | ููุน ุงูุทุฑุฏ (ูุฌุจ ุฃู ูููู ูู ุงูููู ุงููุนุฑูุฉ ูู ูุณุชูุฏ ุงูุจูุงูุงุช) |
| `village_id` | string | โ | ูุนุฑู ุงููุฑูุฉ/ุงูููุทูุฉ ููุชุณููู (ูุฌุจ ุฃู ูููู ูู ุงููุนุฑูุงุช ุงููุนุฑูุฉ ูู ูุณุชูุฏ ุงูุจูุงูุงุช) |
| `street` | string | โ | ุนููุงู ุงูุดุงุฑุน ููุชุณููู |
| `total_cost` | string | โ | ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ ููุทุฑุฏ |
| `barcode` | string | โ | ุงูุจุงุฑููุฏ ุงูุฎุงุต ุจุงูุทุฑุฏ |

#### ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ (Optional Fields):

| ุงูุญูู | ุงูููุน | ูุทููุจ | ุงููุตู |
|------|------|-------|-------|
| `note` | string | โ | ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ ููุทุฑุฏ |

---

### 4๏ธโฃ **ุชุญููู ุงูุญููู ุจุงูุชูุตูู**

#### **`to_name` (ุงุณู ุงููุณุชูู)**
- **ุงูููุน:** ูุต (string)
- **ุงูุบุฑุถ:** ุงุณู ุงูุดุฎุต ุงูุฐู ุณูุชู ุชุณููู ุงูุทุฑุฏ ุฅููู
- **ูุซุงู:** `"ุฃุญูุฏ ูุญูุฏ ุนูู"`
- **ููุงุญุธุงุช:** ูุฌุจ ุงูุชุญูู ูู ุฃูู ููุณ ูุงุฑุบุงู

#### **`to_phone` (ุฑูู ุงููุงุชู ุงูุฃุณุงุณู)**
- **ุงูููุน:** ูุต (string)
- **ุงูุบุฑุถ:** ุฑูู ุงููุงุชู ุงูุฑุฆูุณู ููุชูุงุตู ูุน ุงููุณุชูู
- **ูุซุงู:** `"01234567890"` ุฃู `"+201234567890"`
- **ููุงุญุธุงุช:** ูุฌุจ ุงูุชุญูู ูู ุตุญุฉ ุงูุฑูู

#### **`alter_phone` (ุฑูู ุงููุงุชู ุงูุจุฏูู)**
- **ุงูููุน:** ูุต (string)
- **ุงูุบุฑุถ:** ุฑูู ูุงุชู ุจุฏูู ูู ุญุงูุฉ ุนุฏู ุงููุตูู ููุฑูู ุงูุฃุณุงุณู
- **ูุซุงู:** `"09876543210"`
- **ููุงุญุธุงุช:** ูุฌุจ ุงูุชุญูู ูู ุตุญุฉ ุงูุฑูู

#### **`description` (ุงููุตู)**
- **ุงูููุน:** ูุต (string)
- **ุงูุบุฑุถ:** ูุตู ูุญุชููุงุช ุงูุทุฑุฏ ุฃู ุชูุงุตููู
- **ูุซุงู:** `"ุฌูุงุฒ ุฅููุชุฑููู - ูุงุชู ุฐูู"`
- **ููุงุญุธุงุช:** ูุณุงุนุฏ ูู ุงูุชุนุฑู ุนูู ุงูุทุฑุฏ

#### **`package_type` (ููุน ุงูุทุฑุฏ)**
- **ุงูููุน:** ูุต (string)
- **ุงูุบุฑุถ:** ุชุตููู ููุน ุงูุทุฑุฏ
- **ุงูููู ุงููุญุชููุฉ:** ูุฌุจ ุฃู ุชููู ูู ุงูููู ุงููุนุฑูุฉ ูู ูุณุชูุฏ ุงูุจูุงูุงุช ุงููุฑูู
- **ูุซุงู:** `"normal"`, `"express"`, `"fragile"`, ุฅูุฎ
- **ููุงุญุธุงุช:** โ๏ธ ูุฌุจ ุงูุชุญูู ูู ุฃู ุงููููุฉ ุตุญูุญุฉ ูููุจููุฉ

#### **`village_id` (ูุนุฑู ุงููุฑูุฉ/ุงูููุทูุฉ)**
- **ุงูููุน:** ูุต (string)
- **ุงูุบุฑุถ:** ุชุญุฏูุฏ ุงูููุทูุฉ ุงูุฌุบุฑุงููุฉ ููุชุณููู
- **ุงูููู ุงููุญุชููุฉ:** ูุฌุจ ุฃู ุชููู ูู ุงููุนุฑูุงุช ุงููุนุฑูุฉ ูู ูุณุชูุฏ ุงูุจูุงูุงุช ุงููุฑูู
- **ูุซุงู:** `"1"`, `"5"`, `"12"`
- **ููุงุญุธุงุช:** โ๏ธ ูุฌุจ ุงูุชุญูู ูู ูุฌูุฏ ุงููุฑูุฉ ูู ุงููุธุงู

#### **`street` (ุนููุงู ุงูุดุงุฑุน)**
- **ุงูููุน:** ูุต (string)
- **ุงูุบุฑุถ:** ุงูุนููุงู ุงูุชูุตููู ููุดุงุฑุน ููุชุณููู
- **ูุซุงู:** `"ุดุงุฑุน ุงููุตุฑุ ุนูุงุฑุฉ 15ุ ุงูุฏูุฑ ุงูุซุงูุซ"`
- **ููุงุญุธุงุช:** ูุฌุจ ุฃู ูููู ููุตูุงู ููุงูุฉ ููุชุณููู

#### **`total_cost` (ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ)**
- **ุงูููุน:** ูุต (string) - ููู ูุฌุจ ุฃู ูููู ุฑูู
- **ุงูุบุฑุถ:** ูููุฉ ุงูุทุฑุฏ ุจุงููุงูู
- **ูุซุงู:** `"200"` ุฃู `"1500.50"`
- **ููุงุญุธุงุช:** โ๏ธ ูุฌุจ ุงูุชุญูู ูู ุฃูู ุฑูู ุตุงูุญ

#### **`barcode` (ุงูุจุงุฑููุฏ)**
- **ุงูููุน:** ูุต (string)
- **ุงูุบุฑุถ:** ุฑูุฒ ูุฑูุฏ ููุทุฑุฏ ููุชุชุจุน
- **ูุซุงู:** `"barcode_abc123"` ุฃู `"PKG-2024-001234"`
- **ููุงุญุธุงุช:** โ๏ธ ูุฌุจ ุฃู ูููู ูุฑูุฏุงู (Unique)

#### **`note` (ุงูููุงุญุธุงุช)**
- **ุงูููุน:** ูุต (string)
- **ูุทููุจ:** โ ุงุฎุชูุงุฑู
- **ุงูุบุฑุถ:** ุฃู ูุนูููุงุช ุฅุถุงููุฉ ุฃู ุชุนูููุงุช ุฎุงุตุฉ
- **ูุซุงู:** `"ุชุณููู ูู ุงูุตุจุงุญ ููุท"` ุฃู `"ูุฑุฌู ุงูุญุฐุฑ - ูุด"`

---

### 5๏ธโฃ **Response (ุงูุงุณุชุฌุงุจุฉ)**

#### โ **Success Response (ูุฌุงุญ ุงูุนูููุฉ)**

**Status Code:** `201 Created`

**Body Structure:**
```json
{
    "code": 200,
    "state": "success",
    "data": {
        "package_id": 1234
    },
    "message": "Operation Successful"
}
```

**ุงูุชุญููู:**
- `code: 200` - ุฑูุฒ ุงููุฌุงุญ (ุญุชู ูู ูุงู Status Code 201)
- `state: "success"` - ุญุงูุฉ ุงูุนูููุฉ (ูุฌุญ)
- `data.package_id` - ูุนุฑู ุงูุทุฑุฏ ุงูุฐู ุชู ุฅูุดุงุคู (ุฑูู ูุฑูุฏ)
- `message` - ุฑุณุงูุฉ ูุฌุงุญ

#### โ **Error Response (ุฎุทุฃ ูู ุงูุนูููุฉ)**

**Status Code:** `400 Bad Request` (ุฃู `422 Unprocessable Entity`)

**Body Structure:**
```json
{
    "code": 302,
    "state": "false",
    "data": {
        "street": [
            "The street field is required."
        ]
    },
    "errors": {
        "street": [
            "The street field is required."
        ]
    }
}
```

**ุงูุชุญููู:**
- `code: 302` - ุฑูุฒ ุงูุฎุทุฃ
- `state: "false"` - ุญุงูุฉ ุงูุนูููุฉ (ูุดู)
- `data` - ูุญุชูู ุนูู ุฃุฎุทุงุก ุงูุชุญูู ูู ุงูุตุญุฉ (Validation Errors)
- `errors` - ูุณุฎุฉ ููุฑุฑุฉ ูู ุงูุฃุฎุทุงุก (ููุชูุงูู)

**ุฃูุซูุฉ ุนูู ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:**
- ุญููู ูุทููุจุฉ ููููุฏุฉ
- ููู ุบูุฑ ุตุญูุญุฉ (ูุซู `package_type` ุฃู `village_id`)
- ุฑูู ูุงุชู ุบูุฑ ุตุญูุญ
- ุจุงุฑููุฏ ููุฑุฑ
- ุชูููุฉ ุบูุฑ ุตุญูุญุฉ

---

### 6๏ธโฃ **Authentication (ุงููุตุงุฏูุฉ)**

**ุงูููุน:** Bearer Token Authentication

**ุงููุชุทูุจุงุช:**
- ูุฌุจ ุฅุฑุณุงู Bearer Token ูู header `Authorization`
- ุงูู Token ูุฌุจ ุฃู ูููู ุตุงูุญุงู ูุบูุฑ ููุชูู ุงูุตูุงุญูุฉ
- ุงูุดุฑูุฉ ุงูุฎุงุฑุฌูุฉ ุชุญุตู ุนูู Token ูููุตู (ุณูุชู ุฅุฑุณุงูู ุจุดูู ูููุตู)

**ุญุงูุงุช ุงูุฎุทุฃ ุงููุญุชููุฉ:**
- `401 Unauthorized` - ุฅุฐุง ูู ูุชู ุฅุฑุณุงู Token
- `401 Unauthorized` - ุฅุฐุง ูุงู Token ุบูุฑ ุตุงูุญ
- `403 Forbidden` - ุฅุฐุง ูู ููู ููู Token ุตูุงุญูุงุช ูุงููุฉ

---

### 7๏ธโฃ **Validation Rules (ููุงุนุฏ ุงูุชุญูู)**

#### **ุงูุชุญูู ุงููุทููุจ:**

1. **ุฌููุน ุงูุญููู ุงููุทููุจุฉ ููุฌูุฏุฉ:**
   - `to_name`, `to_phone`, `alter_phone`, `description`, `package_type`, `village_id`, `street`, `total_cost`, `barcode`

2. **`to_phone` ู `alter_phone`:**
   - ูุฌุจ ุฃู ููููุง ุฃุฑูุงู ููุงุชู ุตุญูุญุฉ
   - ูุฌุจ ุงูุชุญูู ูู ุงูุชูุณูู (ูุฏ ูุญุชุงุฌ regex)

3. **`package_type`:**
   - ูุฌุจ ุฃู ูููู ูู ุงูููู ุงููุนุฑูุฉ ูู ูุณุชูุฏ ุงูุจูุงูุงุช
   - ุงูุชุญูู ูู ูุฌูุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃู ุงููุงุฆูุฉ ุงููุนุฑูุฉ

4. **`village_id`:**
   - ูุฌุจ ุฃู ูููู ูุนุฑู ูุฑูุฉ ุตุงูุญ ููุฌูุฏ ูู ุงููุธุงู
   - ุงูุชุญูู ูู ูุฌูุฏ ุงููุฑูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

5. **`total_cost`:**
   - ูุฌุจ ุฃู ูููู ุฑููุงู ุตุงูุญุงู (numeric)
   - ูุฌุจ ุฃู ูููู ุฃูุจุฑ ูู 0
   - ูุฏ ูุญุชุงุฌ ูุชุญููู ูู string ุฅูู number

6. **`barcode`:**
   - ูุฌุจ ุฃู ูููู ูุฑูุฏุงู (unique)
   - ูุง ูููู ุฃู ูููู ููุงู ุทุฑุฏ ุขุฎุฑ ุจููุณ ุงูุจุงุฑููุฏ
   - ุงูุชุญูู ูู ุนุฏู ูุฌูุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

7. **`street`:**
   - ูุฌุจ ุฃูุง ูููู ูุงุฑุบุงู
   - ูุฏ ูุญุชุงุฌ ุญุฏ ุฃุฏูู ููุทูู

---

### 8๏ธโฃ **ูุซุงู ูุงูู ููุทูุจ**

```http
POST /api/external_company/create-package HTTP/1.1
Host: api.example.com
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkNvbXBhbnkiLCJpYXQiOjE1MTYyMzkwMjJ9.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
Content-Type: application/json
Content-Length: 234

{
    "to_name": "ุฃุญูุฏ ูุญูุฏ ุนูู",
    "to_phone": "01234567890",
    "alter_phone": "09876543210",
    "description": "ุฌูุงุฒ ุฅููุชุฑููู - ูุงุชู ุฐูู",
    "package_type": "normal",
    "village_id": "1",
    "street": "ุดุงุฑุน ุงููุตุฑุ ุนูุงุฑุฉ 15ุ ุงูุฏูุฑ ุงูุซุงูุซ",
    "total_cost": "200",
    "note": "ุชุณููู ูู ุงูุตุจุงุญ ููุท",
    "barcode": "PKG-2024-001234"
}
```

---

### 9๏ธโฃ **ูุง ูุญุชุงุฌ ุชูููุฐู ูู ุงููุดุฑูุน**

#### **ุงููููุงุช ุงููุทููุจุฉ:**

1. **API Route:**
   ```
   app/api/external_company/create-package/route.ts
   ```

2. **Model (ุฅุฐุง ูุฒู ุงูุฃูุฑ):**
   ```
   models/Package.ts
   ```

3. **Validation Schema:**
   ```
   lib/validations/package.validation.ts
   ```

4. **Types:**
   ```
   types/package.ts
   ```

#### **ุงูุฎุทูุงุช ุงูุชูููุฐูุฉ:**

1. โ ุฅูุดุงุก Package Model
2. โ ุฅูุดุงุก Validation Schema ุจุงุณุชุฎุฏุงู Zod
3. โ ุฅูุดุงุก API Route
4. โ ุฅุถุงูุฉ Authentication middleware
5. โ ุฅุถุงูุฉ Validation
6. โ ุงูุชุญูู ูู package_type ู village_id ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
7. โ ุงูุชุญูู ูู unique barcode
8. โ ุญูุธ Package ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
9. โ ุฅุฑุฌุงุน Response ุจุงูุตูุบุฉ ุงููุทููุจุฉ

#### **ุงูุงุนุชุจุงุฑุงุช:**

- ๐ **Security:** ุงูุชุฃูุฏ ูู ุฃู ุงูู Token ุตุงูุญ ูุฃู ุงูุดุฑูุฉ ุงูุฎุงุฑุฌูุฉ ูุฏููุง ุตูุงุญูุงุช
- ๐ **Database:** ุชุตููู Package schema ูุญุชูู ุนูู ุฌููุน ุงูุญููู ุงููุทููุจุฉ
- โ **Validation:** ุชุญูู ุดุงูู ูู ุฌููุน ุงูุญููู
- ๐ **Data Integrity:** ุงูุชุฃูุฏ ูู package_type ู village_id ููุฌูุฏูู ูู ุงููุธุงู
- ๐ **Logging:** ุชุณุฌูู ุฌููุน ูุญุงููุงุช ุฅูุดุงุก packages
- โ๏ธ **Error Handling:** ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก ูุฅุฑุฌุงุน ุฑุณุงุฆู ูุงุถุญุฉ

---

### ๐ **ุฃุณุฆูุฉ ุชุญุชุงุฌ ุฅุฌุงุจุฉ**

1. **ุฃูู ูุณุชูุฏ ุงูุจูุงูุงุช ุงูุฐู ูุญุชูู ุนูู:**
   - ููู `package_type` ุงููุณููุญุฉุ
   - ูุงุฆูุฉ `village_id` ุงููุชุงุญุฉุ

2. **ูุธุงู ุงููุตุงุฏูุฉ:**
   - ููู ูุชู ุฅูุดุงุก Bearer Tokens ููุดุฑูุงุช ุงูุฎุงุฑุฌูุฉุ
   - ูู ููุฌุฏ ูุธุงู API Keys ูููุตูุ
   - ุฃูู ูุชู ุชุฎุฒูู ูุนูููุงุช ุงูุดุฑูุงุช ุงูุฎุงุฑุฌูุฉุ

3. **ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   - ูู ููุฌุฏ Package model ููุฌูุฏุ
   - ูุง ูู ุนูุงูุฉ Package ูุน ุจุงูู ุงูููุงุฐุฌ (Order, User, etc.)ุ

4. **ุงูุชูุงูู:**
   - ูู ููุงู ูุธุงู ุชุชุจุน ููู packagesุ
   - ูู ูุชู ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนูุฏ ุฅูุดุงุก packageุ
   - ูู ููุงู ุชูุงูู ูุน ูุธุงู ุงูุดุญูุ

---

## ๐ ุงูุฎูุงุตุฉ

ูุฐุง API endpoint ูุญุชุงุฌ ุฅูู:
- โ ุฅูุดุงุก Package Model
- โ ุฅูุดุงุก API Route ุฌุฏูุฏ
- โ ูุธุงู ูุตุงุฏูุฉ ููุดุฑูุงุช ุงูุฎุงุฑุฌูุฉ
- โ Validation ุดุงูู
- โ Integration ูุน ุจุงูู ุงููุธุงู

**ุงูุฃููููุฉ:** ๐ด ุนุงููุฉ (ุฅุฐุง ูุงูุช ุงูุดุฑูุฉ ุงูุฎุงุฑุฌูุฉ ุชูุชุธุฑ ูุฐุง ุงูู API)

---

**ุชุงุฑูุฎ ุงูุชุญููู:** 2024

