# ุณูุฑูุจุชุงุช ุงุฎุชุจุงุฑ ุงูุชุฏูู ุงููุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐู ุงูุณูุฑูุจุชุงุช ุชุฎุชุจุฑ ุงูุชุฏูู ุงููุงูู ูู ุฅูุดุงุก ุงูุทูุจ ูู ุงููุณูู ุฅูู ุฅุฑุณุงูู ุฅูู ุดุฑูุฉ ุงูุดุญู.

## ๐ ุงูุณูุฑูุจุชุงุช ุงููุชููุฑุฉ

### 1. `test-order-flow-1-create-order.js`
**ุงููุธููุฉ:** ูุฎุชุจุฑ ุฅูุดุงุก ุงูุทูุจ ูู ุงููุณูู ุจุฏูู ูุนูููุงุช ุดุญู

**ุงูุงุณุชุฎุฏุงู:**
```bash
node scripts/test-order-flow-1-create-order.js
```

**ูุง ูุฎุชุจุฑู:**
- โ ุฅูุดุงุก ุทูุจ ุจุญุงูุฉ `pending`
- โ ุงูุทูุจ ุจุฏูู `shippingCompany`
- โ ุงูุทูุจ ุจุฏูู `villageId`
- โ ุงูุทูุจ ูุญุชูู ุนูู `manualVillageName` ููุท

**ุงููุฎุฑุฌุงุช:**
- `orderId` ููุงุณุชุฎุฏุงู ูู ุงูุณูุฑูุจุชุงุช ุงูุชุงููุฉ

---

### 2. `test-order-flow-2-update-shipping.js`
**ุงููุธููุฉ:** ูุฎุชุจุฑ ุชุญุฏูุซ ูุนูููุงุช ุงูุดุญู ูู ุงูุฅุฏูู

**ุงูุงุณุชุฎุฏุงู:**
```bash
node scripts/test-order-flow-2-update-shipping.js <orderId>
```

**ูุง ูุฎุชุจุฑู:**
- โ ุชุญุฏูุซ `shippingCompany` ุฅูู "Ultra Pal"
- โ ุชุญุฏูุซ `villageId` ูู ุงููุงุฆูุฉ
- โ ุชุญุฏูุซ `villageName` ู `city`
- โ ุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงููุฎุฑุฌุงุช:**
- ุชุญุฏูุซ ุงูุทูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

### 3. `test-order-flow-3-create-package.js`
**ุงููุธููุฉ:** ูุฎุชุจุฑ ุฅูุดุงุก ุงูุญุฒูุฉ ูุฅุฑุณุงููุง ุฅูู ุดุฑูุฉ ุงูุดุญู

**ุงูุงุณุชุฎุฏุงู:**
```bash
node scripts/test-order-flow-3-create-package.js <orderId>
```

**ูุง ูุฎุชุจุฑู:**
- โ ูุฑุงุกุฉ `shippingCompany` ูู ุงูุทูุจ
- โ ูุฑุงุกุฉ `villageId` ูู ุงูุทูุจ
- โ ุงูุจุญุซ ุนู ุดุฑูุฉ ุงูุดุญู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅูุดุงุก ุงูุญุฒูุฉ
- โ ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู API ุงูุฎุงุฑุฌูุฉ
- โ ุงูุชุญูู ูู ุงูุงุณุชุฌุงุจุฉ

**ุงููุฎุฑุฌุงุช:**
- `packageId` ูู ุดุฑูุฉ ุงูุดุญู

---

### 4. `test-order-flow-complete.js`
**ุงููุธููุฉ:** ูุฎุชุจุฑ ุงูุชุฏูู ุงููุงูู ูู ุงูุจุฏุงูุฉ ููููุงูุฉ

**ุงูุงุณุชุฎุฏุงู:**
```bash
node scripts/test-order-flow-complete.js
```

**ูุง ููุนูู:**
- โ ูุดุบู ุฌููุน ุงูุณูุฑูุจุชุงุช ุจุงูุชุฑุชูุจ
- โ ูุฎุชุจุฑ ุงูุชุฏูู ุงููุงูู ูู A ุฅูู Z
- โ ูุนุทู ุชูุฑูุฑุงู ุดุงููุงู

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงูุณุฑูุน

### ุงุฎุชุจุงุฑ ุงูุชุฏูู ุงููุงูู ุฏูุนุฉ ูุงุญุฏุฉ:
```bash
node scripts/test-order-flow-complete.js
```

### ุงุฎุชุจุงุฑ ูู ุฎุทูุฉ ุนูู ุญุฏุฉ:

#### 1. ุฅูุดุงุก ุงูุทูุจ:
```bash
node scripts/test-order-flow-1-create-order.js
# ุณููุธูุฑ orderId ููุงุณุชุฎุฏุงู ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ
```

#### 2. ุชุญุฏูุซ ูุนูููุงุช ุงูุดุญู:
```bash
node scripts/test-order-flow-2-update-shipping.js <orderId>
# ุงุณุชุฎุฏู orderId ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉ
```

#### 3. ุฅูุดุงุก ุงูุญุฒูุฉ ูุฅุฑุณุงููุง:
```bash
node scripts/test-order-flow-3-create-package.js <orderId>
# ุงุณุชุฎุฏู ููุณ orderId ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉ
```

---

## ๐ ุงููุชุทูุจุงุช

1. โ ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช MongoDB
2. โ ูุฌูุฏ ูุณุชุฎุฏู ูุณูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. โ ูุฌูุฏ ููุชุฌ ูุงุญุฏ ุนูู ุงูุฃูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. โ ูุฌูุฏ ุดุฑูุฉ ุดุญู "Ultra Pal" ูุน `apiEndpointUrl` ู `apiToken`
5. โ ูุฌูุฏ ูุฑูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุงูุชุญูู ูู ุงููุชุทูุจุงุช

### ุงูุชุญูู ูู ูุฌูุฏ ุดุฑูุฉ ุงูุดุญู:
```bash
node scripts/update-external-company-api.js "Ultra Pal" "https://ultra-pal.net/api/external_company/create-package" "115062|ak2BeovW6RvCsVOZ8HXbszmuEYl6aNuMbdAjEPge"
```

---

## ๐ ูุง ูุชู ุงุฎุชุจุงุฑู

### โ **ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุงูุทูุจ**
- [x] ุงููุณูู ูุง ูุฑู ูุนูููุงุช ุงูุดุญู
- [x] ุงูุทูุจ ููุญูุธ ุจุญุงูุฉ `pending`
- [x] ูุง ููุฌุฏ `shippingCompany` ุฃู `villageId`
- [x] ููุฌุฏ `manualVillageName` ููุท

### โ **ุงูุฎุทูุฉ 2: ุชุญุฏูุซ ุงูุดุญู**
- [x] ุงูุฅุฏูู ูุฎุชุงุฑ `shippingCompany`
- [x] ุงูุฅุฏูู ูุฎุชุงุฑ `villageId`
- [x] ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### โ **ุงูุฎุทูุฉ 3: ุฅุฑุณุงู ููุดุญู**
- [x] `createPackageFromOrder` ููุฑุฃ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [x] ูุฌุฏ ุดุฑูุฉ ุงูุดุญู ุจุงูุงุณู
- [x] ูุณุชุฎุฏู `villageId` ุจุดูู ุตุญูุญ
- [x] ูุฑุณู ุงูุจูุงูุงุช ุจููุณ ุชูุณูู ุงูุณูุฑูุจุช
- [x] ูุณุชุฎุฏู `apiToken` ุจุดูู ุตุญูุญ
- [x] ูุฑุณู ุฅูู ููุณ API URL

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูุดู Test 1:
- โ ุชุฃูุฏ ูู ูุฌูุฏ ูุณุชุฎุฏู ูุณูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุชุฃูุฏ ูู ูุฌูุฏ ููุชุฌ ูุงุญุฏ ุนูู ุงูุฃูู

### ุฅุฐุง ูุดู Test 2:
- โ ุชุฃูุฏ ูู ูุฌูุฏ ุดุฑูุฉ "Ultra Pal" ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุชุฃูุฏ ูู ูุฌูุฏ ูุฑูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู
- โ ุงุณุชุฎุฏู ุงูุณูุฑูุจุช `update-external-company-api.js` ูุฅูุดุงุก/ุชุญุฏูุซ ุงูุดุฑูุฉ

### ุฅุฐุง ูุดู Test 3:
- โ ุชุฃูุฏ ูู ุฃู `shippingCompany` ู `villageId` ููุฌูุฏุงู ูู ุงูุทูุจ
- โ ุชุฃูุฏ ูู ุฃู ุดุฑูุฉ ุงูุดุญู ูุฏููุง `apiEndpointUrl` ู `apiToken`
- โ ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช (ูุฅุฑุณุงู ุงูุทูุจ ุฅูู API)
- โ ุฑุงุฌุน ุงูุณุฌูุงุช (logs) ููุนุฑูุฉ ุงูุฎุทุฃ

---

## ๐ ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุงุฎุชุจุงุฑ ูุงูู ุณุฑูุน
```bash
node scripts/test-order-flow-complete.js
```

### ูุซุงู 2: ุงุฎุชุจุงุฑ ุฎุทูุฉ ุจุฎุทูุฉ
```bash
# 1. ุฅูุดุงุก ุงูุทูุจ
node scripts/test-order-flow-1-create-order.js
# Output: Order ID: 696ae54dd462301714ac5608

# 2. ุชุญุฏูุซ ุงูุดุญู
node scripts/test-order-flow-2-update-shipping.js 696ae54dd462301714ac5608

# 3. ุฅุฑุณุงู ููุดุญู
node scripts/test-order-flow-3-create-package.js 696ae54dd462301714ac5608
```

---

## โ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุนูุฏ ุชุดุบูู `test-order-flow-complete.js`ุ ูุฌุจ ุฃู ุชุฑู:

```
โ Test 1 PASSED: Order created correctly by marketer
โ Test 2 PASSED: Shipping info updated correctly
โ Test 3 PASSED: Package created and sent successfully!

๐ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช!
```

---

## ๐ ููุงุญุธุงุช

- ุงูุณูุฑูุจุชุงุช ุชุณุชุฎุฏู `mongoose` ููุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุณูุฑูุจุชุงุช ุชุณุชุฎุฏู `.env.local` ููุญุตูู ุนูู `MONGODB_URI`
- ุงูุณูุฑูุจุชุงุช ุชูุฑุฃ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญููููุฉ
- ุงูุณูุฑูุจุชุงุช ูุง ุชุญุฐู ุงูุจูุงูุงุช (ุชุชุฑู ุงูุทูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุชุญูู)

